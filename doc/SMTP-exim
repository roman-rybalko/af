Концепция/CodeStyle конфигурационного файла Exim

Использовать один конф. файл, include не применять (для ускорения загрузки).

Переменные
..._f - флаг, имеет значение true/false и никакое другое, может быть передан в condition без ${if bool{...}}
..._m - строковое сообщение (message), может быть пустая строка
acl_c_s_..., acl_m_s_... - переменные на основе системных параметров
acl_c_u_..., acl_m_u_... - переменные на основе пользовательских параметров
acl_c_..., acl_m_... - служебные (локальные) переменные

Макросы
..._F - флаг, имеет значение true/false и никакое другое, может быть передан в condition без ${if bool{...}}
..._D - строковые (скалярные) данные (data), может быть пустая строка
..._L - список (со стандартным разделителем элементов ":")
..._Lnl - список с разделителем элементов "\n" (new line)
..._Lc - список с разделителем элементов "," (coma)
..._L<sep> - список с разделителем элементов закодированным <sep>

При создании списка макросом разделитель не добавляется. Разделитель добавляетя только при использовании списка.
M_L_nl = ${lookup ldapm{...}}
route_list = ${if bool_lax{M_L_nl}{...}{...}}
M2_L_nl = ${map {<\n M_L_nl}{($item)}}
M3 = ${reduce {<\n M2_L_nl}{data=}{$value$item}}
Если добавить разделитель при создании списка, то не будет возможности определить пустой ли список методом bool_lax{}.

Макросы и переменные именуются акронимами, возможно с разделителем "_".
При первом определении в комментарии записывается расшифровка акронима.

Т.к. запросы в БД кешируются, предпочтительно использовать макросы (а не переменные) - оптимизация: отложенные запросы в БД.
Если настройка используется в нескольких секциях (макросы определены только в пределах одной секции) - допустимо
использовать переменные.
Если настройка используется из секции с ограниченными возможностями (client_send в authenticator не позволяет в макросы включать двоеточие ":") - применять переменные.

Вложенные выражения разбивать на макросы - не более 4 скобок ({{{{}}}}).

Для переменных ..._f и макросов ..._F использовать bool{...}, для остальных типов использовать bool_lax{...}. Это позволит обнаружить проблему.

Формат ответов SMTP:
<код> [параметр[,параметр...]]/[параметр[,параметр]] (<Сообщение>) [id=...]
Комбинация "<код> [параметр[,параметр...]]/[параметр[,параметр]]" во всех ответах должны быть уникальны.
